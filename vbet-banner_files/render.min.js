!function i(r,o,a){var s,e;function c(n,e){var t;if(!o[n]){if(!r[n]){if(t="function"==typeof require&&require,!e&&t)return t(n,!0);if(s)return s(n,!0);throw new Error("Cannot find module '"+n+"'")}t=o[n]={exports:{}},r[n][0].call(t.exports,function(e){var t=r[n][1][e];return c(t||e)},t,t.exports,i,r,o,a)}return o[n].exports}for(s="function"==typeof require&&require,e=0;e<a.length;e++)c(a[e]);return c}({1:[function(n,e,t){var I,i,r,u,p,f;r="v1.5.24",u="click",p="custom_event",f="custom_progress_event",n("./utils/extensions/string"),n("./utils/extensions/math"),n("./utils/polyfills/console"),I=n("./utils/BFUtils")(),window.BFUtils||(window.BFUtils=I),i=function(d,w,e){var s,a,c;return d.$renderVersion=r,d.protocol=0===e.src.indexOf("http")?e.src.split("/")[0]:"",d.$vars=d.$vars||{},d.$params=w,d.$script=e,n("./render/custom-fixes/mrgreen-flashtalking")(d),a=!0,c=I.urlParametersToJson(e.src),e.parentNode&&"HEAD"!=e.parentNode.nodeName?t(d,w,e):I.bindEvent(document,"ready",function(){a=!1,t(d,w,e);try{I.unbindEvent(document,"ready",arguments.callee)}catch(e){}}),s;function b(e,t){var n;document.createEvent?(n=document.createEvent("HTMLEvents")).initEvent(t,!0,!0):(n=document.createEventObject()).eventType=t,n.eventName=t,document.createEvent&&e.dispatchEvent(n)}function y(e,t){"complete"===(t=t||window).document.readyState?e():I.bindEvent(t,"load",e)}function l(e){var t,n,i,r,o,a,s,c=e.data;try{String.isString(c)&&(c=JSON.parse(c))}catch(e){c=null}if(c&&(t=c.event,a=c.data,n=c.params,t&&a&&n&&n.placement===d.id)){switch(t){case u:I.click(d,w,n.spotIndexes,!0,a);break;case p:case f:i=100,(s=a.name)&&(r=parseFloat(a.value),o=a.id,a=a.label,s={n:String(s).substr(0,i)},null!=o&&(s.id=String(o).substr(0,i)),null!=a&&(s.l=String(a).substr(0,i)),NaN!==r&&(s.m=Math.round(100*r)/100),t===f?I.queueProgressEvent(d,4,s,n.spotIndexes,!1,w):I.queueTrackingEvent(d,4,s,n.spotIndexes,!1,w))}e&&e.stopImmediatePropagation&&e.stopImmediatePropagation()}}function x(){var e,t,n,i=s.firstChild,r=!1,o=s.offsetWidth/Math.toNumber(d.ad.spots[0].size.width),a=Math.toNumber(d.ad.size.width)/Math.toNumber(d.ad.size.height);if(d.$vars.$scale=o||1,1<(e=d.ad.type.dependencies).length)for(t=1;t<e.length;t++)(n=e[t]).func&&this[n.func+"Resize"]&&this[n.func+"Resize"](s,d,o)&&(r=!0);r||(I.supportsHtml5()&&(I.setVendorStyle(i,"transform","scale("+o+")translate3d(0,0,0)"),I.setVendorStyle(i,"transformOrigin","0 0")),i.style.width=s.offsetWidth+"px",i.style.height=i.parentNode.offsetWidth/a+"px",s.style.height=i.style.height=s.offsetWidth/a+"px")}function t(t,n,e){var i,r,o;window.BFBanners=window.BFBanners||[],window.BFBanners.push({placement:t,params:n}),i="bf_timer_"+t.id+"_"+(new Date).getTime(),window[i]=null,function(){I.bindEvent(window,"message",l),this.eventListenerInitiated=!0}(),b(e,"loaded"),n.politeloading&&(t.politeLoading="off"!=n.politeloading),n.targeturl&&(t.targetUrl=n.targeturl),n.targetwindow&&(t.targetWindow=n.targetwindow),n.display&&(t.displayType=n.display),n.responsive&&(t.responsive="on"==n.responsive),t.imageIframe="off"!==n.imageiframe,s=function(e,t){var n=c.container||d.container,i=document.createElement("div");i.id="bf"+(new Date).getTime(),i.style.width=d.responsive?"100%":e.width,i.style.height=d.responsive?"100%":e.height,i.style.overflow="hidden",i.style.position="relative";try{w&&"on"===w.tobii&&i.setAttribute("data-tobii-beacon-tags","customer_id=bannerflow,ad_id="+d.id+",brand="+d.brand.id)}catch(e){}n||!a?n?(n=document.getElementById(n))&&(n.innerHTML="",n.appendChild(i)):document.body.appendChild(i):d.ad.type.settings.stopRender||t.parentNode.insertBefore(i,t.nextSibling);t=document.createElement("div");return i.appendChild(t),i}(t.ad.size,e),t.responsive&&(I.bindEvent(window,"load",function(){I.bindEvent(window,"resize",x)}),I.bindEvent(s,"resize",x),0===s.parentNode.offsetWidth&&(window[i]=setInterval(function(){1<=s.parentNode.offsetWidth&&(clearInterval(window[i]),x())},100))),t.targetUrl&&0<t.targetUrl.length&&(0===t.targetUrl.toLowerCase().indexOf("www")&&(t.targetUrl="http://"+t.targetUrl),"="==t.targetUrl.substring(t.targetUrl.length-1)&&(t.targetUrl+="[target_url_esc]"),"%3D"==t.targetUrl.substring(t.targetUrl.length-3)&&(t.targetUrl+="[target_url_esc_esc]")),"animated"!=t.displayType||I.supportsHtml5()||(t.displayType="image"),E()||(t.ad.type.$unsupported=!0),t.$bannersToDisplay=function(e,t){var n,i,r,o,a,s,c,d,l,u,p,f,g;for(n=[],i=0;i<e.ad.spots.length;i++){switch((s=e.ad.spots[i]).type){case"regular":o=s.selections[0];break;case"ab-test":for(c=Math.random(),l=d=0;l<s.selections.length;l++)if(d+=s.selections[l].weight,c<=d){o=s.selections[l];break}break;default:console.log("Incorrect ad type: "+s.id+" - "+s.type.name)}if(o){if(1<(u=o.banners).length)if(null==o.localization){for(a=(t||(navigator.userLanguage?navigator.userLanguage.toLowerCase():window.navigator.language?window.navigator.language.toLowerCase():e.brand.defaultLocalization)).substr(0,2),p=0;p<u.length;p++)for(f=u[p],g=f.localization.split(","),l=0;l<g.length;l++){if(g[l].split("-")[0]==a){r=f;break}g[l]!=e.brand.defaultLocalization||r||(r=f)}r=r||u[0]}else for(p=0;p<u.length;p++){if(f=u[p],-1<s.localization.indexOf(f.localization)){r=f;break}f.localization!=e.brand.defaultLocalization||r||(r=f)}else 1==u.length?r=u[0]:console.log("No banner available in selection for spot: "+s.id);r?n.push(r):console.log("No banner was selected/found for spot: "+s.id),e.ad.spots[i].selectedBanner=r}}return n}(t,n.localization),"true"===t.ad.type.settings.renderOnlyContainer&&E()||function(i,r,o){var e,t,n,a,s,c,d,l,u=[],p=r.ad.type.$unsupported?1:i.length,f=r.politeLoading,g=r.displayType,m=0;function h(){var e=u.length;1===m&&(f&&b(o,"politedone"),r.ad.type.settings.stopRender||r.bftracking&&r.bftracking.preview),f&&"animated"==g&&e++,m==e&&b(o,"bannersloaded")}function v(){for(var e,t=f&&"animated"==g?0:1,n=t;n<u.length;n++)(e=I.createIframe(r,r.ad.spots[n],i[n],r.displayType,w)).style.opacity=0,o.children[n].appendChild(e),e.onload=function(){var e,t;m++,this.onload=null,e=Math.toNumber(this["data-index"])||0,o.children[e].firstChild&&0===e&&((t=o.children[e].firstChild).style.zIndex="1",t.style.opacity=0,setTimeout(function(){t.style.display="none"},300)),this.style.opacity="1",h()}}for(e=0;e<p&&(n=i[e],a=r.ad.spots[e],(s=document.createElement("div")).style.width=r.responsive&&!I.supportsHtml5()?Math.toNumber(a.size.width)/Math.toNumber(r.ad.size.width)*100+"%":a.size.width,s.style.height=r.responsive&&!I.supportsHtml5()?Math.toNumber(a.size.height)/Math.toNumber(r.ad.size.height)*100+"%":a.size.height,0===e?(c="image"==g||f&&"animated"==g?"image":"animated",d=I.createIframeOrImage(r,a,n,c,w),I.bindEvent(d,"load",function(){m++,d.style.opacity=1,h()}),d.style.opacity=0,d.style.transition="opacity 0.1s",s.appendChild(d)):(s.style.display="none",s.style.position="absolute",s.style.top="0",s.style.left="0"),u.push(s),o.appendChild(s),E());e++);if(f)if(window.top!==window){try{window.top.document.readyState,t=window.top}catch(e){}t?y(v,t):window.BFLoadManager?BFLoadManager.onLoad(v):window.dhtml&&window.dhtml.sharedEvents?window.dhtml.sharedEvents.once("pageLoadComplete",function(){y(v)}):window.Enabler&&Enabler.isInitialized?(l=function(){Enabler.isPageLoaded()?v():Enabler.addEventListener(studio.events.StudioEvent.PAGE_LOADED,v)},Enabler.isInitialized()?l():Enabler.addEventListener(studio.events.StudioEvent.INIT,l)):y(function(){setTimeout(v,1e3)})}else y(v);else v();r.responsive&&x()}(t.$bannersToDisplay,t,s.firstChild),t.ad.type.settings.stopRender||I.trackImpression(t,n,{vw:I.supportViewable()?1:0}),r=function(e){I.processProgressEventQueue(t),I.sendTrackingData(t,n)},I.bindEvent(window,"beforeunload",r),I.bindEvent(window,"pagehide",r),I.initAdIntervention(t),I.isMobile()&&(o=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/i.test(navigator.userAgent),window.mraid&&o&&window.mraid.addEventListener("viewableChange",function(e){var t=s.getElementsByClassName("bf_animated");t.length&&e&&t[0].contentWindow.postMessage({type:"restartBanner"},"*")}),I.bindEvent(document,"visibilitychange",function(e){"hidden"==document.visibilityState&&r(e)})),b(e,"rendered"),t.$it=(new Date).getTime()}function E(){var e,t,n=d.ad.type.dependencies;if(1<n.length)for(e=1;e<n.length;e++)if((t=n[e]).func&&this[t.func+"Compatible"]&&!this[t.func+"Compatible"](d))return;return 1}},window.BannerFlowRender=i,window.BannerFlowRenderScripts=window.BannerFlowRenderScripts||[],window.BannerFlowRenderScripts.push({func:i,v:r})},{"./render/custom-fixes/mrgreen-flashtalking":2,"./utils/BFUtils":3,"./utils/extensions/math":9,"./utils/extensions/string":10,"./utils/polyfills/console":13}],2:[function(e,t,n){t.exports=function(e){try{var t;e.account&&"mr-green"==e.account.id&&window.myFT&&((t=document.getElementById("banner"))&&(t.style.opacity="0",t.style.background="#fff"))}catch(e){}}},{}],3:[function(c,e,t){e.exports=function(){var e=c("./device"),t=c("./event"),n=c("./style"),i=c("./tracking")(),r=c("./macro"),o=c("./json"),a=c("./banners")(),s=c("./date");return{isMobile:e.isMobile,isTouchDevice:e.isTouchDevice,supportsHtml5:e.supportsHtml5,bindEvent:t.bindEvent,unbindEvent:t.unbindEvent,dispatchEvent:t.dispatchEvent,prefixes:n.prefixes,setVendorStyle:n.setVendorStyle,getStyle:n.getStyle,trackingData:i.trackingData,getImpressionPixelUrl:i.getImpressionPixelUrl,loadPixel:i.loadPixel,sendBeacon:i.sendBeacon,getClickPixelUrl:i.getClickPixelUrl,trackImpression:i.trackImpression,click:i.click,isInView:i.isInView,viewGrade:i.viewGrade,getTrackingData:i.getTrackingData,queueTrackingEvent:i.queueTrackingEvent,queueProgressEvent:i.queueProgressEvent,processProgressEventQueue:i.processProgressEventQueue,sendTrackingData:i.sendTrackingData,fixUrl:i.fixUrl,supportViewable:i.supportViewable,initViewable:i.initViewable,getTracking:i.getProtocol,getDomain:i.getDomain,initAdIntervention:i.initAdIntervention,resolveMacros:r.resolveMacros,getMacros:r.getMacros,toJsonString:o.toJsonString,parseJson:o.parseJson,urlParametersToJson:o.urlParametersToJson,createIframe:a.createIframe,createImage:a.createImage,createIframeOrImage:a.createIframeOrImage,setElementSize:a.setElementSize,getCustomParameters:a.getCustomParameters,getPlacementData:a.getPlacementData,getClientTimeZone:s.getClientTimeZone}}},{"./banners":4,"./date":6,"./device":7,"./event":8,"./json":11,"./macro":12,"./style":14,"./tracking":15}],4:[function(e,t,n){t.exports=function(){var i=e("./device"),s=e("./tracking")(),a=e("./event");return{createIframe:function(e,t,n,i,r){var o=document.createElement("iframe"),a="image"==i?n.srcImage:n.srcAnimated,n=s.getClickPixelUrl(e,n,t),n=(-1<a.indexOf("?")?"&":"?")+"clickpixel="+encodeURIComponent(n)+(e.targetUrl?"&targeturl="+encodeURIComponent(e.targetUrl):"")+"&targetwindow="+e.targetWindow+this.getCustomParameters(r)+"&ref="+encodeURIComponent(s.getDomain());return o.src=(0===a.indexOf("http")||0===a.indexOf("/api")?"":s.getProtocol(e))+a+n,o.className="bf_"+i,this.setElementSize(o,e,t),o.style.backgroundColor=r["background-color"]?r["background-color"]:"transparent",o.frameBorder=0,o.allowtransparency="true",o.style.border="none",o.scrolling="no",o.id="bf_"+ +new Date+parseInt(1e4*Math.random()),o["data-index"]=t.index,o},createImage:function(e,t,n,i,r){var o=document.createElement("img");return o.src=n.imageUrl,o.className="bf_polite",this.setElementSize(o,e,t),o.style.height="auto",o.style.backgroundColor=r["background-color"]?r["background-color"]:"transparent",o.style.outline="none",o.style.border="none",o.style.cursor="pointer",o.id="bf_"+ +new Date+parseInt(1e4*Math.random()),o["data-index"]=t.index,a.bindEvent(o,"click",function(){s.click(e,r,t.index)}),o},createIframeOrImage:function(e,t,n,i,r){return e.imageIframe||"image"!==i||!n.imageUrl?this.createIframe(e,t,n,i,r):this.createImage(e,t,n,i,r)},setElementSize:function(e,t,n){e.setAttribute("style","max-width: none !important;max-height: none !important;"),e.style.width=t.responsive&&!i.supportsHtml5()?"100%":n.size.width,e.style.height=t.responsive&&!i.supportsHtml5()?"100%":n.size.height,e.style.position="absolute",e.style.top=e.style.left="0"},getCustomParameters:function(e){var t,n=",targetwindow,targeturl,display,responsive,politeloading,",i="";for(t in e)-1==n.indexOf(","+t+",")&&(i+="&"+t+"="+e[t]);return i},getPlacementData:function(e){for(var t,n=window.BFBanners||[],i=0;i<n.length;i++)if(e===(t=n[i]).placement.id)return t}}}},{"./device":7,"./event":8,"./tracking":15}],5:[function(e,t,n){t.exports=function(){var e,t=navigator.userAgent,n=t.match(/(opera|edge|chrome|crios|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""};if("Chrome"===n[1]){if(e=t.match(/\bOPR\/(\d+)/))return{name:"Opera",version:e[1]};if(e=t.match(/(edge(?=\/))\/?\s*(\d+)/i))return{name:"Edge",version:e[e.length-1]}}return n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0].replace(/MSIE/g,"IE").replace(/CriOS/gi,"Chrome iOS"),version:n[1]}}()},{}],6:[function(e,t,n){t.exports={getClientTimeZone:function(){function e(e){return((e=Math.floor(Math.abs(e)))<10?"0":"")+e}var t=-(new Date).getTimezoneOffset();return(0<=t?"+":"-")+e(t/60)+e(t%60)}}},{}],7:[function(e,t,n){t.exports={isMobile:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|SamsungBrowser|IEMobile|Opera Mini/i.test(navigator.userAgent)},isTouchDevice:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)},supportsHtml5:function(){var e,t,n,i,r,o;if(-1<navigator.userAgent.indexOf("Android")){if(Number(navigator.userAgent.match(/Android\s(.*?);/i)[1].split(".").slice(0,2).join("."))<4.1)return!1;if(-1<navigator.userAgent.indexOf("Firefox"))return!1}if((t=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return 4<e?e:void 0}())&&t<10)return!1;if(navigator.appVersion)try{if(-1<(e=(e=navigator.appVersion.split("/"))[e.length-2]).indexOf("Safari")&&Number(e.split(".")[0])<=5)return!1}catch(e){}if(0<(t=function(){try{var e=window.navigator.userAgent,t=e.indexOf("OS ");if((-1<e.indexOf("iPhone")||-1<e.indexOf("iPad"))&&-1<t)return Number(e.substr(t+3,4).replace("_","."))}catch(e){}return 0}())&&14<=t&&t<14.2)return!1;if("string"==typeof(n=(document.body||document.documentElement).style)[i="transition"])return!0;for(r=["Moz","webkit","Webkit","Khtml","O","ms"],i=i.charAt(0).toUpperCase()+i.substr(1),o=0;o<r.length;o++)if("string"==typeof n[r[o]+i])return!0;return!1},isiOS:function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}}},{}],8:[function(e,t,n){t.exports={bindEvent:function(e,t,n,i){(e!==window||"load"!==t||"complete"!==document.readyState)&&(e!==document||"ready"!==t||"interactive"!==document.readyState&&"complete"!==document.readyState)?e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,n):n(null)},debounce:function(t,n,i){var r,o,a,s,c,d;if("function"!=typeof t)throw"A function has to be provided to be able to debounce!";return d=function(){var e=Date.now()-s;e<n&&0<=e?r=setTimeout(d,n-e):(r=null,i||(c=t.apply(a,o),r||(a=o=null)))},function(){a=this,o=arguments,s=Date.now();var e=i&&!r;return r=r||setTimeout(d,n),e&&(c=t.apply(a,o),a=o=null),c}},unbindEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent&&e.detachEvent("on"+t,n)},dispatchEvent:function(t,e,n){var i,r,o,a;try{i=new Event(t)}catch(e){(i=document.createEvent("Event")).initEvent(t,!0,!1)}if(i.data=e,n&&document.createEvent)n.dispatchEvent(i);else if(vars._listeners[i.type]instanceof Array)for(o=0,a=(r=vars._listeners[i.type]).length;o<a;o++)r[o].call(vars,i,e)}}},{}],9:[function(e,t,n){t.exports=(Math.limit||(Math.limit=function(e,t,n){return this.min(this.max(e,t),n)}),Math.roundTo||(Math.roundTo=function(e,t){return t=Math.abs(t)||1,Math.round(e/t)*t}),Math.floorTo||(Math.floorTo=function(e,t){return t=Math.abs(t)||1,Math.floor(e/t)*t}),Math.ceilTo||(Math.ceilTo=function(e,t){return t=Math.abs(t)||1,Math.ceil(e/t)*t}),Math.toDegrees||(Math.toDegrees=function(e){return 180*e/Math.PI}),Math.toRadians||(Math.toRadians=function(e){return e*Math.PI/180}),Math.closest||(Math.closest=function(e,t){var n,i,r=0,o=Number.MAX_VALUE;for(r in e)(i=Math.abs(parseFloat(t)-parseFloat(e[r])))<o&&(o=i,n=parseFloat(e[r]));return n}),Math.toNumber||(Math.toNumber=function(e,t){e=null!=e?parseFloat(e.toString().replace(",",".").replace(/[^\.\d-]/g,""),10):NaN;return isNaN(e)&&void 0!==t?t:e}),void(Math.toInt||(Math.toInt=function(e,t){e=null!=e?parseInt(e.toString().replace(",",".").replace(/[^\.\d-]/g,""),10):NaN;return isNaN(e)&&void 0!==t?t:e})))},{}],10:[function(e,t,n){t.exports=(String.prototype.capitalize||(String.prototype.capitalize=function(){return this[0].toUpperCase()+this.slice(1)}),String.isString||(String.isString=function(e){return"string"==typeof e||e instanceof String}),String.prototype.format||(String.prototype.format=function(){var n=arguments;return this.replace(/{(\d+)}/g,function(e,t){return void 0!==n[t]?n[t]:e})}),void(String.prototype.camelCase||(String.prototype.camelCase=function(){return this.replace(/-([a-z])/gi,function(e,t){return t.toUpperCase()})})))},{}],11:[function(e,t,n){t.exports={toJsonString:function(e){return JSON.stringify(e)},urlParametersToJson:function(e){for(var t,e=-1<e.indexOf("?")?e.split("?")[1]:e,n=e.split("&"),i={},r=0;r<n.length;r++)i[(t=n[r].split("="))[0]]=t[1];return i}}},{}],12:[function(e,t,n){t.exports={resolveMacros:function(e,t){var n,i,r,o=["_double-escaped%","_escaped%","%"];for(e=e.replace("%random%",(new Date).getTime()),n=0;n<o.length;n++)for(i in t)r=t[i],0===n?r=encodeURIComponent(encodeURIComponent(r)):1===n&&(r=encodeURIComponent(r)),e=e.replace(new RegExp("%"+i+o[n],"gi"),r);return e},getMacros:function(e){var t,n={};for(t in e)n["parameter_"+t]=e[t];return n}}},{}],13:[function(e,t,n){t.exports=("undefined"!=typeof console&&void 0!==console.log||(window.console={log:function(){}}),console.warn=console.warn||console.log,void(console.error=console.error||console.log))},{}],14:[function(e,t,n){t.exports={prefixes:["webkit","moz","ms","o"],setVendorStyle:function(e,t,n,i){for(var r=t.charAt(0).toUpperCase()+t.slice(1),o=0;o<this.prefixes.length;o++)e.style[this.prefixes[o]+r]=i?"-"+this.prefixes[o]+"-"+n:n;e.style[t]=n},getStyle:function(e,t){var n,i,r=(e.ownerDocument||document).defaultView;return r&&r.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle?(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t],/^\d+(em|pt|%|ex)?$/i.test(n)?(i=n,r=e.style.left,t=e.runtimeStyle.left,e.runtimeStyle.left=e.currentStyle.left,e.style.left=i||0,i=e.style.pixelLeft+"px",e.style.left=r,e.runtimeStyle.left=t,i):n):void 0}}},{}],15:[function(e,t,n){t.exports=function(){e("./json");var r=e("./macro"),s=e("./event"),c=e("./device"),i=e("./browser"),o=e("./date"),a=e("./url"),d={trackingData:function(e,t){for(var n=[],i=[],r=0;r<t.length;r++)n.push(t[r].id),i.push(t[r].bannerset);return{account:e.account.id,brand:e.brand.id,placement:e.id,ad:e.ad.id,bannerset:i.join(),banner:n.join()}},getImpressionPixelUrl:function(e,t){if(!e.bftracking.preview&&window.JSON){t=this.trackingData(e,t);return this.getProtocol(e)+e.bftracking.url+encodeURIComponent(JSON.parse(t))}},sendBeacon:function(e,t){var n;if(!location||!(-1<location.hostname.indexOf("www.bannerflow.")||-1<location.hostname.indexOf("app.bannerflow.")||-1<location.hostname.indexOf("blog.bannerflow."))){try{t&&"string"!=typeof t&&(t=JSON.stringify(t))}catch(e){}navigator&&navigator.sendBeacon?navigator.sendBeacon(e,t):XMLHttpRequest?((n=new XMLHttpRequest).open("POST",e,!1),n.send(t)):(new Image).src=e}},loadPixel:function(e){var t,n;location&&(-1<location.hostname.indexOf("www.bannerflow.")||-1<location.hostname.indexOf("app.bannerflow.")||-1<location.hostname.indexOf("blog.bannerflow."))||(n=i&&"IE"===i.name&&parseInt(i.version)<10,window.XMLHttpRequest&&!n?((t=new XMLHttpRequest).withCredentials=!0,t.open("GET",0!==(n=e).indexOf("//")?n.replace(/http:\/\//g,"https://"):"https:"+n,!0),t.send()):(new Image).src=e)},getClickPixelUrl:function(e,t,n){var i;return e.bftracking.preview||!window.JSON?"":((i=this.trackingData(e,[t])).spotIndexes=n.index,i.bannerIds=t.id,i=encodeURIComponent(JSON.stringify(i)),e.bftracking.clickUrl+i)},trackImpression:function(e,t,n){var i;e.bftracking&&e.bftracking.preview||(this.queueTrackingEvent(e,1,n,0,!0,t),t.impressionpixel&&(i=(i=decodeURIComponent(t.impressionpixel))+(-1<i.indexOf("?")?"&":"?")+"cb="+(new Date).getTime(),this.loadPixel(i,!0)),t.impressionscript&&((n=document.createElement("script")).type="text/javascript",n.async=!0,n.src=decodeURIComponent(t.impressionscript),0<(i=document.getElementsByTagName("script")).length&&i[0].parentNode.insertBefore(n,i[0])),e.network&&e.network.tag.patternImpressionPixel&&this.loadPixel(this.getProtocol(e)+r.resolveMacros(e.network.tag.patternImpressionPixel,r.getMacros(t))))},fixUrl:function(e,t){return e?(0===e.indexOf("//")?e=this.getProtocol(t)+e:0!==e.indexOf("http")&&(e="http://"+e),e):""},getProtocol:function(e){return(e?e.protocol:null)||window.location.protocol},click:function(e,t,n,i,r){n=n||0,this.getClickPixelUrl(e,e.ad.spots[n].selectedBanner,e.ad.spots[n])&&e.bftracking&&!e.bftracking.preview&&this.queueTrackingEvent(e,2,r,n,!0,e.$params),t.clickpixel&&((new Image).src=decodeURIComponent(t.clickpixel)),t=this.fixUrl(e.ad.spots[n].selectedBanner.targeturl),(n=(n=e.targetUrl||t).replace(/\[target_url\]/gi,t).replace(/\[target_url_esc\]/gi,encodeURIComponent(t)).replace(/\[target_url_esc_esc\]/gi,encodeURIComponent(encodeURIComponent(t))))&&!i&&(n=a.sanitizeUrl(this.fixUrl(n)),window.mraid&&window.mraid.open?mraid.open(n):window.open(n,e.targetWindow||"_blank"))},isInView:function(e,t){return!!e.getBoundingClientRect&&(t?0<this.viewGrade(e):1<=this.viewGrade(e))},viewGrade:function(e){var t,n,i,r;return e.getBoundingClientRect?(n=(t=e.getBoundingClientRect()).right-t.left,i=t.bottom-t.top,r=window.innerWidth||document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight,Math.min(n,Math.max(0,t.right))/n*(Math.min(n,Math.max(0,r-t.left))/n)*(Math.min(i,Math.max(0,t.bottom))/i)*(Math.min(i,Math.max(0,e-t.top))/i)):0},getTrackingData:function(e,t){var n,i,r;return t=t||{},e.$sid=e.$sid||+new Date+"_"+Math.floor(1e5*Math.random()),n=e.$bannersToDisplay?e.$bannersToDisplay[0]:{},i={u:{sr:[window.screen.width,window.screen.height],tz:o.getClientTimeZone(),r:this.getDomain(t)},a:{}},(r=function(e,t,n){n=n||"a",!t&&0!==t||(i[n][e]=t)})("s",e.$sid,"u"),r("vs",e.$renderVersion),r("a",e.account.id),r("br",e.brand.id),r("c",n.bannerset),r("ad",e.ad.id),r("p",e.id),r("b",n.id),r("pl",e.politeLoading?1:0),r("r",e.responsive?1:0),r("an","animated"===e.displayType?1:0),r("s",n.sizeFormatId),r("t",n.translationId),r("l",n.localizationId),r("bf",n.bannerFormatId),r("cid",t.customid),r("ch",t.channel),r("cp",e.campaignId),r("si",e.scheduleId),r("p161",t.p161),i},queueTrackingEvent:function(e,t,n,i,r,o){var a=this;e.$tq=e.$tq||[],(n=n||{}).s=i||0,e.$tq.push({d:(new Date).getTime(),t:t,v:n}),r?(e.$tto&&clearTimeout(e.$tto),e.$tto=null,a.sendTrackingData(e,o,!0)):e.$tto||(e.$tto=setTimeout(function(){e.$tto=null,a.sendTrackingData(e,o)},12e4))},queueProgressEvent:function(e,t,n,i,r,o){var a,s,c;for(e.$ptq=e.$ptq||[],(n=n||{}).s=i||0,a=0;a<e.$ptq.length;a++)if((c=(s=e.$ptq[a]).v).n===n.n&&c.id===n.id&&c.l===n.l)return void(s.v=n);e.$ptq.push({d:(new Date).getTime(),t:t,v:n})},processProgressEventQueue:function(e){e.$ptq&&e.$ptq.length&&!e.$queueProcessed&&(e.$tq=(e.$tq||[]).concat(e.$ptq),e.$ptq=[],e.$queueProcessed=!0)},sendTrackingData:function(e,t,n){var i,r,o,a,s,c,d,l=this,u=2e3,p=e.$tq||[];if(!e.bftracking.preview&&p.length&&window.JSON&&("shared.bannerflow.com"!==location.host||"off"!==t.tracking)){if(i=this.getTrackingData(e,t),r=e.bftracking.trackerUrl||"https://tracker.bannerflow.com/api/tr/v1/pixel?data=",n)for(o=r.length;p.length;){for(a=p.length,s=p.slice(0,a),c=encodeURIComponent(JSON.stringify(s));o+c.length>u&&1<a;)a--,s=p.slice(0,a),c=encodeURIComponent(JSON.stringify(s));i.e=p.splice(0,a),d=r+encodeURIComponent(JSON.stringify(i)),l.loadPixel(d)}else i.e=p,this.sendBeacon(r,i);e.$tq=[]}},supportViewable:function(){return document.createEvent&&(!p()||window.mraid&&mraid.getState||window.IntersectionObserver)},initViewable:function(n,i,r){var e,t;d.supportViewable()&&(s.bindEvent(n,"inview",function(){!function(e,t){e.$tivf||(e.$tit=setTimeout(function(){d.queueTrackingEvent(e,3,{},0,!0,t),e.$tivf=!0},1e3));e.$vt=(new Date).getTime()}(i,r)}),s.bindEvent(n,"notinview",function(){u(0,i)}),s.bindEvent(window,"beforeunload",function(){u(0,i),i.$tiv&&d.queueTrackingEvent(i,4,{i:i.$tiv,t:(new Date).getTime()-i.$it},0,!1,r)}),e=function(){l(n,i,r)},s.bindEvent(document,"visibilitychange",e),p()?window.IntersectionObserver?new IntersectionObserver(function(e,t){e=e[0].intersectionRatio;l(n,i,r,e)},{threshold:[.3,.5]}).observe(n):window.mraid&&mraid.getState&&(t=function(){mraid.isViewable()&&s.dispatchEvent("inview",{},n),s.bindEvent(mraid,"viewableChange",function(e){e?s.dispatchEvent("inview",{},n):s.dispatchEvent("notinview",{},n)})},"loading"===mraid.getState()?s.bindEvent(mraid,"ready",t):t()):(s.bindEvent(window,"scroll",e),s.bindEvent(window,"resize",e),s.bindEvent(window,"focus",e),s.bindEvent(window,"blur",function(){l(n,i,r,0)}),e()))},getDomain:function(e){var t,n,i=e&&e.domain&&"${DetectedDomain}"!==e.domain?decodeURIComponent(e.domain):"";return!i&&window.context&&(i=window.context.canonicalUrl),i||(n=(t=function(){var e=window;for(;e.parent&&e!==e.parent;)try{if(e.parent.location.href,!e.parent.document)break;e=e.parent}catch(e){break}return e}()).document,(e=t.location||(n?n.location:void 0))&&e.ancestorOrigins&&e.ancestorOrigins.length&&(i=e.ancestorOrigins[e.ancestorOrigins.length-1]),(!e||e.ancestorOrigins)&&i||(n&&n.referrer&&p(t)?i=n.referrer:e&&e.href&&(i=e.href),i&&-1<i.indexOf("data:text")&&(i=""))),i.replace(/\?.*/g,"")},initAdIntervention:function(i){try{var e=new ReportingObserver(function(e,t){n(e)},{buffered:!0});function n(e){var t=i.ad.id,n=i.$bannersToDisplay?i.$bannersToDisplay[0]:{};d.sendBeacon("https://tracker.bannerflow.com/api/tr/blocked/"+t+"/"+n.id,e)}e.observe(),bf.bindEvent(window,"unload",function(){n(e.takeRecords())})}catch(e){}}};function l(e,t,n,i,r){var o,a;i=void 0!==i?i:d.viewGrade(e),r=r||(o=e,a=t,!c.isMobile()&&242500<(o.clientWidth||a.ad.size.width)*(o.clientHeight||a.ad.size.height)?.3:.5),t.$iv&&(i<r||document.hidden)?(t.$iv=!1,s.dispatchEvent("notinview",{},e,n)):!t.$iv&&r<=i&&!document.hidden&&(t.$iv=!0,s.dispatchEvent("inview",{},e,n))}function u(e,t){t.$tit&&(clearTimeout(t.$tit),t.$tit=null),t.$vt&&(t.$tiv=(t.$tiv||0)+((new Date).getTime()-t.$vt)),t.$vt=null}function p(e){try{return(e=e||window).self!==window.top}catch(e){return 1}}return d}},{"./browser":5,"./date":6,"./device":7,"./event":8,"./json":11,"./macro":12,"./url":16}],16:[function(e,t,n){t.exports=function(){"use strict";var t=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,n=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;return{getQueryStrings:function(e){e&&-1<e.indexOf("?")&&(e=e.substring(e.indexOf("?")+1));for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){try{e=decodeURIComponent(e.replace(n," "))}catch(e){}return e},o=e||window.location.search.substring(1),a={};t=i.exec(o);)a[r(t[1])]=r(t[2]);return a},appendQueryString:function(e,t,n){return t&&n?e+(-1<e.indexOf("?")?"&":"?")+t+"="+n:e},sanitizeUrl:function(e){if(!e||"#"===e)return e;if(e.match(t)||e.match(n))return e;throw new Error('Error: unsafe URL value: "'+e+'" (see http://g.co/ng/security#xss)')}}}()},{}]},{},[1]);
//# sourceMappingURL=render.min.js.map
